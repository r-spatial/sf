<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="sf">
<title>6. Miscellaneous • sf</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="6. Miscellaneous">
<meta property="og:description" content="sf">
<meta property="og:image" content="https://r-spatial.github.io/sf/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">sf</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0-15</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/sf1.html">1. Simple Features for R</a>
    <a class="dropdown-item" href="../articles/sf2.html">2. Reading, Writing and Converting Simple Features</a>
    <a class="dropdown-item" href="../articles/sf3.html">3. Manipulating Simple Feature Geometries</a>
    <a class="dropdown-item" href="../articles/sf4.html">4. Manipulating Simple Features</a>
    <a class="dropdown-item" href="../articles/sf5.html">5. Plotting Simple Features</a>
    <a class="dropdown-item" href="../articles/sf6.html">6. Miscellaneous</a>
    <a class="dropdown-item" href="../articles/sf7.html">7. Spherical geometry in sf using s2geometry</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/r-spatial/sf/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>6. Miscellaneous</h1>
                        <h4 data-toc-skip class="author">Edzer
Pebesma</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-spatial/sf/blob/HEAD/vignettes/sf6.Rmd" class="external-link"><code>vignettes/sf6.Rmd</code></a></small>
      <div class="d-none name"><code>sf6.Rmd</code></div>
    </div>

    
    
<p>This vignette describes a number of issues that did not come up in
the previous vignettes, and that may or may not be categorized as
“frequently asked questions”. Readers are encouraged to provide entries
for this vignette (as for the others).</p>
<div class="section level2">
<h2 id="what-is-this-epsg-code-all-about">What is this EPSG code all about?<a class="anchor" aria-label="anchor" href="#what-is-this-epsg-code-all-about"></a>
</h2>
<p>EPSG stands for a maintained, well-understood registry of spatial
reference systems, maintained by the International Association of Oil
&amp; Gass Producers (IOGP). <code>EPSG</code> stands for the authority,
e.g. <code>EPSG:4326</code> stands for spatial reference system with ID
4326 as it is maintained by the EPSG authority. The website for the EPSG
registry is found at the epsg.org domain. Using <code>4326</code>
instead of <code>EPSG:4326</code> is allowed (<code>EPSG</code> is the
default authority) but the latter form, <code>EPSG:4326</code> is better
(less ambiguous).</p>
</div>
<div class="section level2">
<h2 id="why-should-we-use-ogccrs84-instead-of-epsg4326">Why should we use <code>OGC:CRS84</code> instead of
<code>EPSG:4326</code>?<a class="anchor" aria-label="anchor" href="#why-should-we-use-ogccrs84-instead-of-epsg4326"></a>
</h2>
<p>EPSG:4326 formally defines coordinate axes to be in the order
latitude-longitude, but practically all data sources and software
environments use longitude-latitude axis order. OGC:CRS84 is equivalent
to EPSG:4326 except that it defines coordinate axis order
longitude-latitude, removing this ambiguity so to speak. See also
<code><a href="../reference/st_crs.html">st_axis_order()</a></code></p>
</div>
<div class="section level2">
<h2 id="how-does-sf-deal-with-secondary-geometry-columns">How does <code>sf</code> deal with secondary geometry columns?<a class="anchor" aria-label="anchor" href="#how-does-sf-deal-with-secondary-geometry-columns"></a>
</h2>
<p><code>sf</code> objects can have more than one geometry list-column,
but always only one geometry column is considered <em>active</em>, and
returned by <code>st_geometry</code>. When there are multiple geometry
columns, the default <code>print</code> methods reports which one is
active:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/">sf</a></span><span class="op">)</span></span>
<span><span class="co">## Linking to GEOS 3.10.2, GDAL 3.4.1, PROJ 8.2.1; sf_use_s2() is TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/demo.html" class="external-link">demo</a></span><span class="op">(</span><span class="va">nc</span>, ask <span class="op">=</span> <span class="cn">FALSE</span>, echo <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">nc</span><span class="op">$</span><span class="va">geom2</span> <span class="op">=</span> <span class="fu"><a href="../reference/geos_unary.html">st_centroid</a></span><span class="op">(</span><span class="fu"><a href="../reference/st_geometry.html">st_geometry</a></span><span class="op">(</span><span class="va">nc</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">nc</span>, n <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">## Simple feature collection with 100 features and 14 fields</span></span>
<span><span class="co">## Attribute-geometry relationships: aggregate (8), identity (6), NA's (1)</span></span>
<span><span class="co">## Active geometry column: geom</span></span>
<span><span class="co">## Geometry type: MULTIPOLYGON</span></span>
<span><span class="co">## Dimension:     XY</span></span>
<span><span class="co">## Bounding box:  xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965</span></span>
<span><span class="co">## Geodetic CRS:  NAD27</span></span>
<span><span class="co">## First 2 features:</span></span>
<span><span class="co">##    AREA PERIMETER CNTY_ CNTY_ID      NAME  FIPS FIPSNO CRESS_ID BIR74 SID74</span></span>
<span><span class="co">## 1 0.114     1.442  1825    1825      Ashe 37009  37009        5  1091     1</span></span>
<span><span class="co">## 2 0.061     1.231  1827    1827 Alleghany 37005  37005        3   487     0</span></span>
<span><span class="co">##   NWBIR74 BIR79 SID79 NWBIR79                           geom</span></span>
<span><span class="co">## 1      10  1364     0      19 MULTIPOLYGON (((-81.47276 3...</span></span>
<span><span class="co">## 2      10   542     3      12 MULTIPOLYGON (((-81.23989 3...</span></span>
<span><span class="co">##                        geom2</span></span>
<span><span class="co">## 1  POINT (-81.49823 36.4314)</span></span>
<span><span class="co">## 2 POINT (-81.12513 36.49111)</span></span></code></pre></div>
<p>We can switch the active geometry by using
<code>st_geometry&lt;-</code> or <code>st_set_geometry</code>, as in</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot.html">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/st_geometry.html">st_geometry</a></span><span class="op">(</span><span class="va">nc</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="sf6_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/st_geometry.html">st_geometry</a></span><span class="op">(</span><span class="va">nc</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"geom2"</span></span>
<span><span class="fu"><a href="../reference/plot.html">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/st_geometry.html">st_geometry</a></span><span class="op">(</span><span class="va">nc</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="sf6_files/figure-html/unnamed-chunk-3-2.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="does-st_simplify-preserve-topology">Does <code>st_simplify</code> preserve topology?<a class="anchor" aria-label="anchor" href="#does-st_simplify-preserve-topology"></a>
</h2>
<p><code>st_simplify</code> is a topology-preserving function, but does
this on the level of individual feature geometries. That means, simply
said, that after applying it, a polygon will still be a polygon. However
when two features have a longer shared boundary, applying
<code>st_simplify</code> to the object does not guarantee that in the
resulting object these two polygons still have the same boundary in
common, since the simplification is done independently, <em>for each
feature geometry</em>.</p>
</div>
<div class="section level2">
<h2 id="why-do-my-dplyr-verbs-not-work-for-sf-objects">Why do my dplyr verbs not work for <code>sf</code> objects?<a class="anchor" aria-label="anchor" href="#why-do-my-dplyr-verbs-not-work-for-sf-objects"></a>
</h2>
<p>They do! However, many developers like to write scripts that never
load packages but address all functions by the <code>sf::</code> prefix,
as in</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">i</span> <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="../reference/geos_binary_pred.html">st_intersects</a></span><span class="op">(</span><span class="va">sf1</span>, <span class="va">sf2</span><span class="op">)</span></span></code></pre></div>
<p>This works up to the moment that a <code>dplyr</code> generic like
<code>select</code> for an <code>sf</code> object is needed: should one
call <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">dplyr::select</a></code> (won’t know it should search in package
<code>sf</code>) or <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">sf::select</a></code> (which doesn’t exist)?
Neither works. One should in this case simply load <code>sf</code>,
e.g. by</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/">sf</a></span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Edzer Pebesma.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
