<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Geometric operations on (pairs of) simple feature geometry sets — geos • sf</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">sf</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/edzer/sfr/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Geometric operations on (pairs of) simple feature geometry sets</h1>
    </div>

    
    <p>Geometric operations on (pairs of) simple feature geometry sets</p>
    

    <pre><span class='fu'>st_is_valid</span>(<span class='no'>x</span>, <span class='kw'>NA_on_exception</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>reason</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>st_dimension</span>(<span class='no'>x</span>, <span class='kw'>NA_if_empty</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>st_area</span>(<span class='no'>x</span>)

<span class='fu'>st_length</span>(<span class='no'>x</span>, <span class='kw'>dist_fun</span> <span class='kw'>=</span> <span class='kw'>geosphere</span><span class='kw'>::</span><span class='no'>distGeo</span>)

<span class='fu'>st_is_simple</span>(<span class='no'>x</span>)

<span class='fu'>st_distance</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='no'>dist_fun</span>)

<span class='fu'>st_relate</span>(<span class='no'>x</span>, <span class='no'>y</span>)

<span class='fu'>st_intersects</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>sparse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>prepared</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>st_disjoint</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>sparse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>prepared</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>st_touches</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>sparse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>prepared</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>st_crosses</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>sparse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>prepared</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>st_within</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>sparse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>prepared</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>st_contains</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>sparse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>prepared</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>st_contains_properly</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>sparse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>prepared</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>st_overlaps</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>sparse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>prepared</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>st_equals</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>sparse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>prepared</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>st_covers</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>sparse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>prepared</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>st_covered_by</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>sparse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>prepared</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>st_equals_exact</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='no'>par</span>, <span class='kw'>sparse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>prepared</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>st_buffer</span>(<span class='no'>x</span>, <span class='no'>dist</span>, <span class='kw'>nQuadSegs</span> <span class='kw'>=</span> <span class='fl'>30</span>)

<span class='fu'>st_boundary</span>(<span class='no'>x</span>)

<span class='fu'>st_convex_hull</span>(<span class='no'>x</span>)

<span class='fu'>st_simplify</span>(<span class='no'>x</span>, <span class='kw'>preserveTopology</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>dTolerance</span> <span class='kw'>=</span> <span class='fl'>0</span>)

<span class='fu'>st_triangulate</span>(<span class='no'>x</span>, <span class='kw'>dTolerance</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>bOnlyEdges</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>st_voronoi</span>(<span class='no'>x</span>, <span class='no'>envelope</span>, <span class='kw'>dTolerance</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>bOnlyEdges</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>st_polygonize</span>(<span class='no'>x</span>)

<span class='fu'>st_line_merge</span>(<span class='no'>x</span>)

<span class='fu'>st_centroid</span>(<span class='no'>x</span>)

<span class='fu'>st_segmentize</span>(<span class='no'>x</span>, <span class='no'>dfMaxLength</span>, <span class='no'>...</span>)

<span class='fu'>st_combine</span>(<span class='no'>x</span>)

<span class='fu'>st_intersection</span>(<span class='no'>x</span>, <span class='no'>y</span>)

<span class='fu'>st_difference</span>(<span class='no'>x</span>, <span class='no'>y</span>)

<span class='fu'>st_sym_difference</span>(<span class='no'>x</span>, <span class='no'>y</span>)

<span class='fu'>st_union</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='no'>...</span>, <span class='kw'>by_feature</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>st_line_sample</span>(<span class='no'>x</span>, <span class='no'>n</span>, <span class='no'>density</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"regular"</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>object of class <code>sf</code>, <code>sfc</code> or <code>sfg</code></p></td>
    </tr>
    <tr>
      <th>NA_on_exception</th>
      <td><p>logical; if TRUE, for polygons that would otherwise raise an GEOS error (e.g. for a polygon having more than zero but less than 4 points) return an <code>NA</code> rather than raise an error, and suppress warning messages (e.g. about self-intersection); if FALSE, regular GEOS errors and warnings will be emitted.</p></td>
    </tr>
    <tr>
      <th>reason</th>
      <td><p>logical; if <code>TRUE</code>, return a character with, for each geometry, the reason for invalidity, or <code>"Valid Geometry"</code> otherwise; if set to <code>TRUE</code>, <code>NA_on_exception</code> is automatically <code>FALSE</code> (errors are emitted in case of one or more corrupt geometries).</p></td>
    </tr>
    <tr>
      <th>NA_if_empty</th>
      <td><p>logical; if TRUE, return NA for empty geometries</p></td>
    </tr>
    <tr>
      <th>dist_fun</th>
      <td><p>function to be used for great circle distances of geographical coordinates; for unprojected (long/lat) data, this should be a distance function of package geosphere, or compatible to that; it defaults to <a href='http://www.rdocumentation.org/packages/geosphere/topics/distGeo'>distGeo</a> in that case; for other data metric lengths are computed.</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p>object of class <code>sf</code>, <code>sfc</code> or <code>sfg</code></p></td>
    </tr>
    <tr>
      <th>sparse</th>
      <td><p>logical; should a sparse matrix be returned (TRUE) or a dense matrix?</p></td>
    </tr>
    <tr>
      <th>prepared</th>
      <td><p>logical; prepare geometry for x, before looping over y?</p></td>
    </tr>
    <tr>
      <th>par</th>
      <td><p>numeric; parameter used for "equals_exact" (margin) and "is_within_distance"</p></td>
    </tr>
    <tr>
      <th>dist</th>
      <td><p>numeric; buffer distance for all, or for each of the elements in <code>x</code></p></td>
    </tr>
    <tr>
      <th>nQuadSegs</th>
      <td><p>integer; number of segments per quadrant (fourth of a circle)</p></td>
    </tr>
    <tr>
      <th>preserveTopology</th>
      <td><p>logical; carry out topology preserving simplification?</p></td>
    </tr>
    <tr>
      <th>dTolerance</th>
      <td><p>numeric; tolerance parameter</p></td>
    </tr>
    <tr>
      <th>bOnlyEdges</th>
      <td><p>logical; if TRUE, return lines, else return polygons</p></td>
    </tr>
    <tr>
      <th>envelope</th>
      <td><p>object of class <code>sfc</code> or <code>sfg</code> with the envelope for a voronoi diagram</p></td>
    </tr>
    <tr>
      <th>dfMaxLength</th>
      <td><p>numeric; max length of a line segment. If <code>x</code> has geographical coordinates (long/lat), <code>dfMaxLength</code> is a length with unit metre, and segmentation takes place along the great circle, using <a href='http://www.rdocumentation.org/packages/geosphere/topics/intermediate'>gcIntermediate</a>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>ignored</p></td>
    </tr>
    <tr>
      <th>by_feature</th>
      <td><p>logical; if TRUE, union each feature, if FALSE return a single feature with the union the set of features</p></td>
    </tr>
    <tr>
      <th>n</th>
      <td><p>integer; number of points to choose per geometry; if missing, n will be computed as <code>round(density * st_length(geom))</code>.</p></td>
    </tr>
    <tr>
      <th>density</th>
      <td><p>numeric; density (points per distance unit) of the sampling, possibly a vector of length equal to the number of features (otherwise recycled).</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>character; indicate the sampling type, either "regular" or "random"</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>matrix (sparse or dense); if dense: of type <code>character</code> for <code>relate</code>, <code>numeric</code> for <code>distance</code>, and <code>logical</code> for all others; matrix has dimension <code>x</code> by <code>y</code>; if sparse (only possible for those who return logical in case of dense): return list of length length(x) with indices of the TRUE values for matching <code>y</code>.</p>
<p>st_dimension returns 0 for points, 1 for lines, 2 for surfaces; if <code>NA_if_empty</code> is <code>TRUE</code> return <code>NA</code> for empty geometries.</p>
<p>st_area returns the area of a geometry, in the coordinate reference system used; in case <code>x</code> is in degrees longitude/latitude, <a href='http://www.rdocumentation.org/packages/geosphere/topics/area'>areaPolygon</a> is used for area calculation.</p>
<p>st_length returns the length of a LINESTRING or MULTILINESTRING geometry, using the coordinate reference system used; if the coordinate reference system of <code>x</code> was set, the returned value has a unit of measurement. POINT or MULTIPOINT geometries return zero, POLYGON or MULTIPOLYGON are converted into LINESTRING or MULTILINESTRING, respectively.</p>
<p>st_is_simple and st_is_valid return a logical vector</p>
<p>st_distance returns a dense numeric matrix of dimension length(x) by length(y)</p>
<p>st_relate returns a dense <code>character</code> matrix; element [i,j] has nine characters, refering to the DE9-IM relationship between x[i] and y[j], encoded as IxIy,IxBy,IxEy,BxIy,BxBy,BxEy,ExIy,ExBy,ExEy where I refers to interior, B to boundary, and E to exterior, and e.g. BxIy the dimensionality of the intersection of the the boundary of x[i] and the interior of y[j], which is one of 0,1,2,F, digits denoting dimensionality, F denoting not intersecting.</p>
<p>functions <code>st_intersects</code> up to <code>st_equals_exact</code> return a sparse or dense logical matrix with rows and columns corresponding to the number of geometries (or rows) in x and y, respectively

<code>st_buffer</code>, <code>st_boundary</code>, <code>st_convex_hull</code>, <code>st_simplify</code>,
<code>st_triangulate</code>, <code>st_voronoi</code>, <code>st_polygonize</code>, <code>st_line_merge</code>,
<code>st_centroid</code> and <code>st_segmentize</code> return an <a href='sfc.html'>sfc</a> or an <a href='sf.html'>sf</a> 
object with the same number of geometries as in <code>x</code></p>
<p>All functions (or methods) returning a geometry return an object of the same class as that of the first argument (<code>x</code>).  <code>st_intersection</code>, <code>st_union</code>, <code>st_difference</code> and <code>st_sym_difference</code> return the non-empty geometries resulting from applying the operation to all geometry pairs in <code>x</code> and <code>y</code>, and return an object of class <code>sfg</code>, <code>sfc</code> or <code>sf</code>, where in the latter case the matching attributes of the original object(s) are added. The <code>sfc</code> geometry list-column returned carries an attribute <code>idx</code>, which is an <code>n x 2</code> matrix with every row the index of the corresponding entries of <code>x</code> and <code>y</code>, respectively. <code>st_union</code> has in addition the ability to work on a single argument <code>x</code> (<code>y</code> missing): in this case, if <code>by_feature</code> is <code>FALSE</code> all geometries are unioned together and an <code>sfg</code> or single-geometry <code>sfc</code> object is returned, if <code>by_feature</code> is <code>TRUE</code> each feature geometry is unioned; this can for instance be used to resolve internal boundaries after polygons were combined using <code>st_combine</code>.

<code>st_union(x)</code> unions geometries. Unioning a set of overlapping polygons has the effect of merging the areas (i.e. the same effect as iteratively unioning all individual polygons together). Unioning a set of LineStrings has the effect of fully noding and dissolving the input linework. In this context "fully noded" means that there will be a node or endpoint in the output for every endpoint or line segment crossing in the input. "Dissolved" means that any duplicate (e.g. coincident) line segments or portions of line segments will be reduced to a single line segment in the output.	Unioning a set of Points has the effect of merging al identical points (producing a set with no duplicates).</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>function <code>dist_fun</code> should follow the pattern of the distance function <a href='http://www.rdocumentation.org/packages/geosphere/topics/distGeo'>distGeo</a>: the first two arguments must be 2-column point matrices, the third the semi major axis (radius, in m), the third the ellipsoid flattening.</p>
<p>`st_contains_properly(A,B)` is true if A intersects B's interior, but not its edges or exterior; A contains A, but A does not properly contain A.
    <code>st_triangulate</code> requires GEOS version 3.4 or above
    <code>st_voronoi</code> requires GEOS version 3.4 or above</p>
<p>in case of <code>st_polygonize</code>, <code>x</code> must be an object of class <code>LINESTRING</code> or <code>MULTILINESTRING</code>, or an <code>sfc</code> geometry list-column object containing these</p>
<p>in case of <code>st_line_merge</code>, <code>x</code> must be an object of class <code>MULTILINESTRING</code>, or an <code>sfc</code> geometry list-column object containing these
    <code>st_combine</code> combines geometries without resolving borders, using <a href='st.html'>c.sfg</a>; see st_union for resolving boundaries.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>p1</span> <span class='kw'>=</span> <span class='fu'><a href='st_as_sfc.html'>st_as_sfc</a></span>(<span class='st'>"POLYGON((0 0, 0 10, 10 0, 10 10, 0 0))"</span>)
<span class='fu'>st_is_valid</span>(<span class='no'>p1</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: Self-intersection at or near point 5 5</span></div><div class='output co'>#&gt; [1] FALSE</div><div class='input'><span class='fu'>st_is_valid</span>(<span class='fu'><a href='sfc.html'>st_sfc</a></span>(<span class='fu'><a href='st.html'>st_point</a></span>(<span class='fl'>0</span>:<span class='fl'>1</span>), <span class='no'>p1</span><span class='kw'>[[</span><span class='fl'>1</span>]]), <span class='kw'>reason</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: Self-intersection at or near point 5 5</span></div><div class='output co'>#&gt; [1] "Valid Geometry"         "Self-intersection[5 5]"</div><div class='input'><span class='no'>x</span> <span class='kw'>=</span> <span class='fu'><a href='sfc.html'>st_sfc</a></span>(
        <span class='fu'><a href='st.html'>st_point</a></span>(<span class='fl'>0</span>:<span class='fl'>1</span>),
        <span class='fu'><a href='st.html'>st_linestring</a></span>(<span class='fu'>rbind</span>(<span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>0</span>),<span class='fu'>c</span>(<span class='fl'>1</span>,<span class='fl'>1</span>))),
        <span class='fu'><a href='st.html'>st_polygon</a></span>(<span class='fu'>list</span>(<span class='fu'>rbind</span>(<span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>0</span>),<span class='fu'>c</span>(<span class='fl'>1</span>,<span class='fl'>0</span>),<span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>1</span>),<span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>0</span>)))),
        <span class='fu'><a href='st.html'>st_multipoint</a></span>(),
        <span class='fu'><a href='st.html'>st_linestring</a></span>(),
        <span class='fu'><a href='st.html'>st_geometrycollection</a></span>())
<span class='fu'>st_dimension</span>(<span class='no'>x</span>)</div><div class='output co'>#&gt; [1]  0  1  2 NA NA NA</div><div class='input'><span class='fu'>st_dimension</span>(<span class='no'>x</span>, <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; [1] 0 1 2 0 1 0</div><div class='input'><span class='no'>dist_vincenty</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>p1</span>, <span class='no'>p2</span>, <span class='no'>a</span>, <span class='no'>f</span>) <span class='kw'>geosphere</span><span class='kw'>::</span><span class='fu'>distVincentyEllipsoid</span>(<span class='no'>p1</span>, <span class='no'>p2</span>, <span class='no'>a</span>, <span class='no'>a</span> * (<span class='fl'>1</span>-<span class='no'>f</span>), <span class='no'>f</span>)
<span class='no'>line</span> <span class='kw'>=</span> <span class='fu'><a href='sfc.html'>st_sfc</a></span>(<span class='fu'><a href='st.html'>st_linestring</a></span>(<span class='fu'>rbind</span>(<span class='fu'>c</span>(<span class='fl'>30</span>,<span class='fl'>30</span>), <span class='fu'>c</span>(<span class='fl'>40</span>,<span class='fl'>40</span>))), <span class='kw'>crs</span> <span class='kw'>=</span> <span class='fl'>4326</span>)
<span class='fu'>st_length</span>(<span class='no'>line</span>)</div><div class='output co'>#&gt; 1434649 m</div><div class='input'><span class='fu'>st_length</span>(<span class='no'>line</span>, <span class='kw'>dist_fun</span> <span class='kw'>=</span> <span class='no'>dist_vincenty</span>)</div><div class='output co'>#&gt; 1434649 m</div><div class='input'><span class='no'>p1</span> <span class='kw'>=</span> <span class='fu'><a href='st.html'>st_point</a></span>(<span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>0</span>))
<span class='no'>p2</span> <span class='kw'>=</span> <span class='fu'><a href='st.html'>st_point</a></span>(<span class='fu'>c</span>(<span class='fl'>2</span>,<span class='fl'>2</span>))
<span class='no'>pol1</span> <span class='kw'>=</span> <span class='fu'><a href='st.html'>st_polygon</a></span>(<span class='fu'>list</span>(<span class='fu'>rbind</span>(<span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>0</span>),<span class='fu'>c</span>(<span class='fl'>1</span>,<span class='fl'>0</span>),<span class='fu'>c</span>(<span class='fl'>1</span>,<span class='fl'>1</span>),<span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>1</span>),<span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>0</span>)))) - <span class='fl'>0.5</span>
<span class='no'>pol2</span> <span class='kw'>=</span> <span class='no'>pol1</span> + <span class='fl'>1</span>
<span class='no'>pol3</span> <span class='kw'>=</span> <span class='no'>pol1</span> + <span class='fl'>2</span>
<span class='fu'>st_relate</span>(<span class='fu'><a href='sfc.html'>st_sfc</a></span>(<span class='no'>p1</span>, <span class='no'>p2</span>), <span class='fu'><a href='sfc.html'>st_sfc</a></span>(<span class='no'>pol1</span>, <span class='no'>pol2</span>, <span class='no'>pol3</span>))</div><div class='output co'>#&gt;      [,1]        [,2]        [,3]       
#&gt; [1,] "0FFFFF212" "FF0FFF212" "FF0FFF212"
#&gt; [2,] "FF0FFF212" "FF0FFF212" "0FFFFF212"</div><div class='input'><span class='no'>nc</span> <span class='kw'>=</span> <span class='fu'><a href='st_read.html'>st_read</a></span>(<span class='fu'>system.file</span>(<span class='st'>"shape/nc.shp"</span>, <span class='kw'>package</span><span class='kw'>=</span><span class='st'>"sf"</span>))</div><div class='output co'>#&gt; Reading layer `nc' from data source `/home/edzer/git/sfr/inst/shape/nc.shp' using driver `ESRI Shapefile'
#&gt; converted into: POLYGON
#&gt; Simple feature collection with 100 features and 14 fields
#&gt; geometry type:  MULTIPOLYGON
#&gt; dimension:      XY
#&gt; bbox:           xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965
#&gt; epsg (SRID):    4267
#&gt; proj4string:    +proj=longlat +datum=NAD27 +no_defs</div><div class='input'><span class='fu'><a href='plot.html'>plot</a></span>(<span class='fu'>st_convex_hull</span>(<span class='no'>nc</span>))</div><div class='output co'>#&gt; <span class='warning'>Warning: plotting the first 10 out of 14 attributes; use max.plot = 14 to plot all</span></div><img src='geos-21.png' alt='' width='540' height='400' /><div class='input'><span class='fu'><a href='plot.html'>plot</a></span>(<span class='no'>nc</span>, <span class='kw'>border</span> <span class='kw'>=</span> <span class='fu'>grey</span>(<span class='fl'>.5</span>))</div><div class='output co'>#&gt; <span class='warning'>Warning: plotting the first 10 out of 14 attributes; use max.plot = 14 to plot all</span></div><img src='geos-24.png' alt='' width='540' height='400' /><div class='input'><span class='fu'>set.seed</span>(<span class='fl'>1</span>)
<span class='no'>x</span> <span class='kw'>=</span> <span class='fu'><a href='st.html'>st_multipoint</a></span>(<span class='fu'>matrix</span>(<span class='fu'>runif</span>(<span class='fl'>10</span>),,<span class='fl'>2</span>))
<span class='no'>box</span> <span class='kw'>=</span> <span class='fu'><a href='st.html'>st_polygon</a></span>(<span class='fu'>list</span>(<span class='fu'>rbind</span>(<span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>0</span>),<span class='fu'>c</span>(<span class='fl'>1</span>,<span class='fl'>0</span>),<span class='fu'>c</span>(<span class='fl'>1</span>,<span class='fl'>1</span>),<span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>1</span>),<span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>0</span>))))
<span class='kw'>if</span> (<span class='fu'><a href='sf_extSoftVersion.html'>sf_extSoftVersion</a></span>()[<span class='st'>"GEOS"</span>] <span class='kw'>&gt;=</span> <span class='st'>"3.5.0"</span>) {
 <span class='no'>v</span> <span class='kw'>=</span> <span class='fu'><a href='sfc.html'>st_sfc</a></span>(<span class='fu'>st_voronoi</span>(<span class='no'>x</span>, <span class='fu'><a href='sfc.html'>st_sfc</a></span>(<span class='no'>box</span>)))
 <span class='fu'><a href='plot.html'>plot</a></span>(<span class='no'>v</span>, <span class='kw'>col</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>border</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>axes</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
 <span class='fu'><a href='plot.html'>plot</a></span>(<span class='no'>box</span>, <span class='kw'>add</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>col</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>border</span> <span class='kw'>=</span> <span class='fl'>1</span>) <span class='co'># a larger box is returned, as documented</span>
 <span class='fu'><a href='plot.html'>plot</a></span>(<span class='no'>x</span>, <span class='kw'>add</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>col</span> <span class='kw'>=</span> <span class='st'>'red'</span>, <span class='kw'>cex</span><span class='kw'>=</span><span class='fl'>2</span>, <span class='kw'>pch</span><span class='kw'>=</span><span class='fl'>16</span>)
 <span class='fu'><a href='plot.html'>plot</a></span>(<span class='fu'>st_intersection</span>(<span class='fu'><a href='st_cast.html'>st_cast</a></span>(<span class='no'>v</span>), <span class='no'>box</span>)) <span class='co'># clip to smaller box</span>
 <span class='fu'><a href='plot.html'>plot</a></span>(<span class='no'>x</span>, <span class='kw'>add</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>col</span> <span class='kw'>=</span> <span class='st'>'red'</span>, <span class='kw'>cex</span><span class='kw'>=</span><span class='fl'>2</span>, <span class='kw'>pch</span><span class='kw'>=</span><span class='fl'>16</span>)
}</div><img src='geos-26.png' alt='' width='540' height='400' /><img src='geos-27.png' alt='' width='540' height='400' /><div class='input'><span class='no'>mls</span> <span class='kw'>=</span> <span class='fu'><a href='st.html'>st_multilinestring</a></span>(<span class='fu'>list</span>(<span class='fu'>matrix</span>(<span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>0</span>,<span class='fl'>0</span>),,<span class='fl'>2</span>,<span class='kw'>byrow</span><span class='kw'>=</span><span class='fl'>TRUE</span>)))
<span class='fu'>st_polygonize</span>(<span class='fu'><a href='sfc.html'>st_sfc</a></span>(<span class='no'>mls</span>))</div><div class='output co'>#&gt; Geometry set for 1 feature 
#&gt; geometry type:  GEOMETRYCOLLECTION
#&gt; dimension:      XY
#&gt; bbox:           xmin: 0 ymin: 0 xmax: 1 ymax: 1
#&gt; epsg (SRID):    NA
#&gt; proj4string:    NA</div><div class='output co'>#&gt; <span class='message'>GEOMETRYCOLLECTION(POLYGON((0 0, 0 1, 1 1, 0 0)))</span></div><div class='input'><span class='no'>mls</span> <span class='kw'>=</span> <span class='fu'><a href='st.html'>st_multilinestring</a></span>(<span class='fu'>list</span>(<span class='fu'>rbind</span>(<span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>0</span>), <span class='fu'>c</span>(<span class='fl'>1</span>,<span class='fl'>1</span>)), <span class='fu'>rbind</span>(<span class='fu'>c</span>(<span class='fl'>2</span>,<span class='fl'>0</span>), <span class='fu'>c</span>(<span class='fl'>1</span>,<span class='fl'>1</span>))))
<span class='fu'>st_line_merge</span>(<span class='fu'><a href='sfc.html'>st_sfc</a></span>(<span class='no'>mls</span>))</div><div class='output co'>#&gt; Geometry set for 1 feature 
#&gt; geometry type:  LINESTRING
#&gt; dimension:      XY
#&gt; bbox:           xmin: 0 ymin: 0 xmax: 2 ymax: 1
#&gt; epsg (SRID):    NA
#&gt; proj4string:    NA</div><div class='output co'>#&gt; <span class='message'>LINESTRING(0 0, 1 1, 2 0)</span></div><div class='input'><span class='fu'><a href='plot.html'>plot</a></span>(<span class='no'>nc</span>, <span class='kw'>axes</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: plotting the first 10 out of 14 attributes; use max.plot = 14 to plot all</span></div><div class='input'><span class='fu'><a href='plot.html'>plot</a></span>(<span class='fu'>st_centroid</span>(<span class='no'>nc</span>), <span class='kw'>add</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>pch</span> <span class='kw'>=</span> <span class='fl'>3</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: st_centroid does not give correct centroids for longitude/latitude data</span></div><img src='geos-38.png' alt='' width='540' height='400' /><div class='input'><span class='fu'>st_combine</span>(<span class='no'>nc</span>)</div><div class='output co'>#&gt; Geometry set for 1 feature 
#&gt; geometry type:  MULTIPOLYGON
#&gt; dimension:      XY
#&gt; bbox:           xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965
#&gt; epsg (SRID):    4267
#&gt; proj4string:    +proj=longlat +datum=NAD27 +no_defs</div><div class='output co'>#&gt; <span class='message'>MULTIPOLYGON(((-81.4727554321289 36.23435592651...</span></div><div class='input'><span class='fu'><a href='plot.html'>plot</a></span>(<span class='fu'>st_union</span>(<span class='no'>nc</span>))</div><img src='geos-43.png' alt='' width='540' height='400' /><div class='input'><span class='no'>ls</span> <span class='kw'>=</span> <span class='fu'><a href='sfc.html'>st_sfc</a></span>(<span class='fu'><a href='st.html'>st_linestring</a></span>(<span class='fu'>rbind</span>(<span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>0</span>),<span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>1</span>))),
        <span class='fu'><a href='st.html'>st_linestring</a></span>(<span class='fu'>rbind</span>(<span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>0</span>),<span class='fu'>c</span>(<span class='fl'>10</span>,<span class='fl'>0</span>))))
<span class='fu'>st_line_sample</span>(<span class='no'>ls</span>, <span class='kw'>density</span> <span class='kw'>=</span> <span class='fl'>1</span>)</div><div class='output co'>#&gt; Geometry set for 2 features 
#&gt; geometry type:  MULTIPOINT
#&gt; dimension:      XY
#&gt; bbox:           xmin: 0 ymin: 0 xmax: 9.5 ymax: 0.5
#&gt; epsg (SRID):    NA
#&gt; proj4string:    NA</div><div class='output co'>#&gt; <span class='message'>MULTIPOINT(0 0.5)</span></div><div class='output co'>#&gt; <span class='message'>MULTIPOINT(0.5 0, 1.5 0, 2.5 0, 3.5 0, 4.5 0, 5...</span></div><div class='input'><span class='no'>ls</span> <span class='kw'>=</span> <span class='fu'><a href='sfc.html'>st_sfc</a></span>(<span class='fu'><a href='st.html'>st_linestring</a></span>(<span class='fu'>rbind</span>(<span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>0</span>),<span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>1</span>))),
 <span class='fu'><a href='st.html'>st_linestring</a></span>(<span class='fu'>rbind</span>(<span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>0</span>),<span class='fu'>c</span>(<span class='fl'>.1</span>,<span class='fl'>0</span>))), <span class='kw'>crs</span> <span class='kw'>=</span> <span class='fl'>4326</span>)
<span class='fu'>try</span>(<span class='fu'>st_line_sample</span>(<span class='no'>ls</span>, <span class='kw'>density</span> <span class='kw'>=</span> <span class='fl'>1</span>/<span class='fl'>1000</span>)) <span class='co'># error</span>
<span class='fu'>st_line_sample</span>(<span class='fu'><a href='st_transform.html'>st_transform</a></span>(<span class='no'>ls</span>, <span class='fl'>3857</span>), <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>5</span>) <span class='co'># five points for each line</span></div><div class='output co'>#&gt; Geometry set for 2 features 
#&gt; geometry type:  MULTIPOINT
#&gt; dimension:      XY
#&gt; bbox:           xmin: 0 ymin: -7.081155e-10 xmax: 10018.75 ymax: 100192.6
#&gt; epsg (SRID):    3857
#&gt; proj4string:    +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs</div><div class='output co'>#&gt; <span class='message'>MULTIPOINT(0 11132.5142866379, 0 33397.54285991...</span></div><div class='output co'>#&gt; <span class='message'>MULTIPOINT(1113.19490793274 -7.08115455161362e-...</span></div><div class='input'><span class='fu'>st_line_sample</span>(<span class='fu'><a href='st_transform.html'>st_transform</a></span>(<span class='no'>ls</span>, <span class='fl'>3857</span>), <span class='kw'>n</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>1</span>, <span class='fl'>3</span>)) <span class='co'># one and three points</span></div><div class='output co'>#&gt; Geometry set for 2 features 
#&gt; geometry type:  MULTIPOINT
#&gt; dimension:      XY
#&gt; bbox:           xmin: 0 ymin: -7.081155e-10 xmax: 9276.624 ymax: 55662.57
#&gt; epsg (SRID):    3857
#&gt; proj4string:    +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs</div><div class='output co'>#&gt; <span class='message'>MULTIPOINT(0 55662.5714331921)</span></div><div class='output co'>#&gt; <span class='message'>MULTIPOINT(1855.32484655456 -7.08115455161362e-...</span></div><div class='input'><span class='fu'>st_line_sample</span>(<span class='fu'><a href='st_transform.html'>st_transform</a></span>(<span class='no'>ls</span>, <span class='fl'>3857</span>), <span class='kw'>density</span> <span class='kw'>=</span> <span class='fl'>1</span>/<span class='fl'>1000</span>) <span class='co'># one per km</span></div><div class='output co'>#&gt; Geometry set for 2 features 
#&gt; geometry type:  MULTIPOINT
#&gt; dimension:      XY
#&gt; bbox:           xmin: 0 ymin: -7.081155e-10 xmax: 10625.95 ymax: 110823.7
#&gt; epsg (SRID):    3857
#&gt; proj4string:    +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs</div><div class='output co'>#&gt; <span class='message'>MULTIPOINT(0 501.464607505533, 0 1504.393822518...</span></div><div class='output co'>#&gt; <span class='message'>MULTIPOINT(505.997685423971 -7.08115455161362e-...</span></div><div class='input'><span class='fu'>st_line_sample</span>(<span class='fu'><a href='st_transform.html'>st_transform</a></span>(<span class='no'>ls</span>, <span class='fl'>3857</span>), <span class='kw'>density</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>1</span>/<span class='fl'>1000</span>, <span class='fl'>1</span>/<span class='fl'>10000</span>)) <span class='co'># one per km, one per 10 km</span></div><div class='output co'>#&gt; Geometry set for 2 features 
#&gt; geometry type:  MULTIPOINT
#&gt; dimension:      XY
#&gt; bbox:           xmin: 0 ymin: -7.081155e-10 xmax: 5565.975 ymax: 110823.7
#&gt; epsg (SRID):    3857
#&gt; proj4string:    +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs</div><div class='output co'>#&gt; <span class='message'>MULTIPOINT(0 501.464607505533, 0 1504.393822518...</span></div><div class='output co'>#&gt; <span class='message'>MULTIPOINT(5565.97453966368 -7.08115455161362e-10)</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Edzer Pebesma.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
