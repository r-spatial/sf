<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Read simple features or layers from file or database — st_read • sf</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">sf</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/sf1.html">1. Simple Features for R</a>
    </li>
    <li>
      <a href="../articles/sf2.html">2. Reading, Writing and Converting Simple Features</a>
    </li>
    <li>
      <a href="../articles/sf3.html">3. Manipulating Simple Feature Geometries</a>
    </li>
    <li>
      <a href="../articles/sf4.html">4. Manipulating Simple Features</a>
    </li>
    <li>
      <a href="../articles/sf5.html">5. Plotting Simple Features</a>
    </li>
    <li>
      <a href="../articles/sf6.html">6. Miscellaneous</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-spatial/sf/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Read simple features or layers from file or database</h1>
    </div>

    
    <p>Read simple features from file or database, or retrieve layer names and their geometry type(s)</p>
<p>Read PostGIS table directly through DBI and RPostgreSQL interface, converting binary</p>
    

    <pre class="usage"><span class='fu'>st_read</span>(<span class='no'>dsn</span>, <span class='no'>layer</span>, <span class='no'>...</span>, <span class='kw'>options</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>quiet</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>geometry_column</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>promote_to_multi</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>stringsAsFactors</span> <span class='kw'>=</span> <span class='fu'>default.stringsAsFactors</span>(), <span class='kw'>int64_as_string</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>read_sf</span>(<span class='no'>...</span>, <span class='kw'>quiet</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>stringsAsFactors</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>st_read_db</span>(<span class='kw'>conn</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>table</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>query</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>geom_column</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='no'>EWKB</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dsn</th>
      <td><p>data source name (interpretation varies by driver - for some drivers, <code>dsn</code> is a file name, but may also be a folder,
or contain the name and access credentials of a database); in case of GeoJSON, <code>dsn</code> may be the character string holding the geojson data</p></td>
    </tr>
    <tr>
      <th>layer</th>
      <td><p>layer name (varies by driver, may be a file name without extension); in case <code>layer</code> is missing,
<code>st_read</code> will read the first layer of <code>dsn</code>, give a warning and (unless <code>quiet = TRUE</code>) print a
message when there are multiple layers, or give an error if there are no layers in <code>dsn</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>parameter(s) passed on to st_as_sf</p></td>
    </tr>
    <tr>
      <th>options</th>
      <td><p>character; driver dependent dataset open options, multiple options supported.</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>logical; suppress info on name, driver, size and spatial reference, or signaling no or multiple layers</p></td>
    </tr>
    <tr>
      <th>geometry_column</th>
      <td><p>integer or character; in case of multiple geometry fields, which one to take?</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>integer; ISO number of desired simple feature type; see details. If left zero, and <code>promote_to_multi</code>
is <code>TRUE</code>, in case of mixed feature geometry
types, conversion to the highest numeric type value found will be attempted. A vector with different values for each geometry column
can be given.</p></td>
    </tr>
    <tr>
      <th>promote_to_multi</th>
      <td><p>logical; in case of a mix of Point and MultiPoint, or of LineString and MultiLineString, or of
Polygon and MultiPolygon, convert all to the Multi variety; defaults to <code>TRUE</code></p></td>
    </tr>
    <tr>
      <th>stringsAsFactors</th>
      <td><p>logical; logical: should character vectors be converted to factors?  The `factory-fresh' default
is <code>TRUE</code>, but this can be changed by setting <code>options(stringsAsFactors = FALSE)</code>.</p></td>
    </tr>
    <tr>
      <th>int64_as_string</th>
      <td><p>logical; if TRUE, Int64 attributes are returned as string; if FALSE, they are returned as double
and a warning is given when precision is lost (i.e., values are larger than 2^53).</p></td>
    </tr>
    <tr>
      <th>conn</th>
      <td><p>open database connection</p></td>
    </tr>
    <tr>
      <th>table</th>
      <td><p>table name</p></td>
    </tr>
    <tr>
      <th>query</th>
      <td><p>SQL query to select records; see details</p></td>
    </tr>
    <tr>
      <th>geom_column</th>
      <td><p>character or integer: indicator of name or position of the geometry column; if not provided, the last column of type character is chosen</p></td>
    </tr>
    <tr>
      <th>EWKB</th>
      <td><p>logical; is the WKB is of type EWKB? if missing, defaults to <code>TRUE</code> if <code>conn</code> is of class codePostgreSQLConnection or <code>PqConnection</code>, and to <code>FALSE</code> otherwise</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>object of class sf when a layer was successfully read; in case argument <code>layer</code> is missing and
data source <code>dsn</code> does not contain a single layer, an object of class <code>sf_layers</code> is returned with the
layer names, each with their geometry type(s). Note that the number of layers may also be zero.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>for <code>geometry_column</code>, see also <a href='https://trac.osgeo.org/gdal/wiki/rfc41_multiple_geometry_fields'>https://trac.osgeo.org/gdal/wiki/rfc41_multiple_geometry_fields</a>; for <code>type</code>
values see <a href='https://en.wikipedia.org/wiki/Well-known_text#Well-known_binary'>https://en.wikipedia.org/wiki/Well-known_text#Well-known_binary</a>, but note that not every target value
may lead to successful conversion. The typical conversion from POLYGON (3) to MULTIPOLYGON (6) should work; the other
way around (type=3), secondary rings from MULTIPOLYGONS may be dropped without warnings. <code>promote_to_multi</code> is handled on a per-geometry column basis; <code>type</code> may be specified for each geometry column.</p>
<p>In case of problems reading shapefiles from USB drives on OSX, please see <a href='https://github.com/r-spatial/sf/issues/252'>https://github.com/r-spatial/sf/issues/252</a>.
    <code>read_sf</code> and <code>write_sf</code> are aliases for <code>st_read</code> and <code>st_write</code>, respectively, with some
modified default arguments.
<code>read_sf</code> and <code>write_sf</code> are quiet by default: they do not print information
about the data source.
<code>write_sf</code> delete layers by default: it overwrites existing files.</p>
<p>if <code>table</code> is not given but <code>query</code> is, the spatial reference system (crs) of the table queried is only available in case it has been stored into each geometry record (e.g., by PostGIS, when using EWKB)</p>
<p>in case geom_column is missing: if table is missing, this function will try to read the name of the geometry column from table <code>geometry_columns</code>, in other cases, or when this fails, the geom_column is assumed to be the last column of mode character. If table is missing, the SRID cannot be read and resolved into a proj4string by the database, and a warning will be given.</p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>The use of <code>system.file</code> in examples make sure that examples run regardless where R is installed:
typical users will not use <code>system.file</code> but give the file name directly, either with full path or relative
to the current working directory (see getwd). "Shapefiles" consist of several files with the same basename
that reside in the same directory, only one of them having extension <code>.shp</code>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>nc</span> <span class='kw'>=</span> <span class='fu'>st_read</span>(<span class='fu'>system.file</span>(<span class='st'>"shape/nc.shp"</span>, <span class='kw'>package</span><span class='kw'>=</span><span class='st'>"sf"</span>))</div><div class='output co'>#&gt; Reading layer `nc' from data source `/home/edzer/git/sf/inst/shape/nc.shp' using driver `ESRI Shapefile'
#&gt; Simple feature collection with 100 features and 14 fields
#&gt; geometry type:  MULTIPOLYGON
#&gt; dimension:      XY
#&gt; bbox:           xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965
#&gt; epsg (SRID):    4267
#&gt; proj4string:    +proj=longlat +datum=NAD27 +no_defs</div><div class='input'><span class='fu'>summary</span>(<span class='no'>nc</span>) <span class='co'># note that AREA was computed using Euclidian area on lon/lat degrees</span></div><div class='output co'>#&gt;       AREA          PERIMETER         CNTY_         CNTY_ID            NAME   
#&gt;  Min.   :0.0420   Min.   :0.999   Min.   :1825   Min.   :1825   Alamance : 1  
#&gt;  1st Qu.:0.0910   1st Qu.:1.324   1st Qu.:1902   1st Qu.:1902   Alexander: 1  
#&gt;  Median :0.1205   Median :1.609   Median :1982   Median :1982   Alleghany: 1  
#&gt;  Mean   :0.1263   Mean   :1.673   Mean   :1986   Mean   :1986   Anson    : 1  
#&gt;  3rd Qu.:0.1542   3rd Qu.:1.859   3rd Qu.:2067   3rd Qu.:2067   Ashe     : 1  
#&gt;  Max.   :0.2410   Max.   :3.640   Max.   :2241   Max.   :2241   Avery    : 1  
#&gt;                                                                 (Other)  :94  
#&gt;       FIPS        FIPSNO         CRESS_ID          BIR74           SID74      
#&gt;  37001  : 1   Min.   :37001   Min.   :  1.00   Min.   :  248   Min.   : 0.00  
#&gt;  37003  : 1   1st Qu.:37050   1st Qu.: 25.75   1st Qu.: 1077   1st Qu.: 2.00  
#&gt;  37005  : 1   Median :37100   Median : 50.50   Median : 2180   Median : 4.00  
#&gt;  37007  : 1   Mean   :37100   Mean   : 50.50   Mean   : 3300   Mean   : 6.67  
#&gt;  37009  : 1   3rd Qu.:37150   3rd Qu.: 75.25   3rd Qu.: 3936   3rd Qu.: 8.25  
#&gt;  37011  : 1   Max.   :37199   Max.   :100.00   Max.   :21588   Max.   :44.00  
#&gt;  (Other):94                                                                   
#&gt;     NWBIR74           BIR79           SID79          NWBIR79       
#&gt;  Min.   :   1.0   Min.   :  319   Min.   : 0.00   Min.   :    3.0  
#&gt;  1st Qu.: 190.0   1st Qu.: 1336   1st Qu.: 2.00   1st Qu.:  250.5  
#&gt;  Median : 697.5   Median : 2636   Median : 5.00   Median :  874.5  
#&gt;  Mean   :1050.8   Mean   : 4224   Mean   : 8.36   Mean   : 1352.8  
#&gt;  3rd Qu.:1168.5   3rd Qu.: 4889   3rd Qu.:10.25   3rd Qu.: 1406.8  
#&gt;  Max.   :8027.0   Max.   :30757   Max.   :57.00   Max.   :11631.0  
#&gt;                                                                    
#&gt;           geometry  
#&gt;  MULTIPOLYGON :100  
#&gt;  epsg:4267    :  0  
#&gt;  +proj=long...:  0  
#&gt;                     
#&gt;                     
#&gt;                     
#&gt;                     </div><div class='input'>
</div><span class='co'># NOT RUN {</span>
  <span class='fu'>library</span>(<span class='no'>sp</span>)
  <span class='fu'>example</span>(<span class='no'>meuse</span>, <span class='kw'>ask</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>echo</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
  <span class='fu'>try</span>(<span class='fu'>st_write</span>(<span class='fu'>st_as_sf</span>(<span class='no'>meuse</span>), <span class='st'>"PG:dbname=postgis"</span>, <span class='st'>"meuse"</span>,
       <span class='kw'>layer_options</span> <span class='kw'>=</span> <span class='st'>"OVERWRITE=true"</span>))
  <span class='fu'>try</span>(<span class='no'>st_meuse</span> <span class='kw'>&lt;-</span> <span class='fu'>st_read</span>(<span class='st'>"PG:dbname=postgis"</span>, <span class='st'>"meuse"</span>))
  <span class='kw'>if</span> (<span class='fu'>exists</span>(<span class='st'>"st_meuse"</span>))
    <span class='fu'>summary</span>(<span class='no'>st_meuse</span>)
<span class='co'># }</span><div class='input'><span class='co'># read geojson from string:</span>
<span class='no'>geojson_txt</span> <span class='kw'>&lt;-</span> <span class='fu'>paste</span>(<span class='st'>"{\"type\":\"MultiPoint\",\"coordinates\":"</span>,
   <span class='st'>"[[3.2,4],[3,4.6],[3.8,4.4],[3.5,3.8],[3.4,3.6],[3.9,4.5]]}"</span>)
<span class='no'>x</span> <span class='kw'>=</span> <span class='fu'>read_sf</span>(<span class='no'>geojson_txt</span>)
<span class='no'>x</span></div><div class='output co'>#&gt; Simple feature collection with 1 feature and 0 fields
#&gt; geometry type:  MULTIPOINT
#&gt; dimension:      XY
#&gt; bbox:           xmin: 3 ymin: 3.6 xmax: 3.9 ymax: 4.6
#&gt; epsg (SRID):    4326
#&gt; proj4string:    +proj=longlat +datum=WGS84 +no_defs
#&gt;                         geometry
#&gt; 1 MULTIPOINT (3.2 4, 3 4.6, 3...</div><span class='co'># NOT RUN {</span>
<span class='fu'>library</span>(<span class='no'>RPostgreSQL</span>)
<span class='fu'>try</span>(<span class='no'>conn</span> <span class='kw'>&lt;-</span> <span class='fu'>dbConnect</span>(<span class='fu'><a href='http://www.rdocumentation.org/packages/RPostgreSQL/topics/PostgreSQL'>PostgreSQL</a></span>(), <span class='kw'>dbname</span> <span class='kw'>=</span> <span class='st'>"postgis"</span>))
<span class='kw'>if</span> (<span class='fu'>exists</span>(<span class='st'>"conn"</span>) <span class='kw'>&amp;&amp;</span> !<span class='fu'>inherits</span>(<span class='no'>conn</span>, <span class='st'>"try-error"</span>)) {
  <span class='no'>x</span> <span class='kw'>=</span> <span class='fu'>st_read_db</span>(<span class='no'>conn</span>, <span class='st'>"meuse"</span>, <span class='kw'>query</span> <span class='kw'>=</span> <span class='st'>"select * from meuse limit 3;"</span>)
  <span class='no'>x</span> <span class='kw'>=</span> <span class='fu'>st_read_db</span>(<span class='no'>conn</span>, <span class='kw'>table</span> <span class='kw'>=</span> <span class='st'>"public.meuse"</span>)
  <span class='fu'>print</span>(<span class='fu'>st_crs</span>(<span class='no'>x</span>)) <span class='co'># SRID resolved by the database, not by GDAL!</span>
  <span class='fu'>dbDisconnect</span>(<span class='no'>conn</span>)
 }
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#note">Note</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Edzer Pebesma.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
